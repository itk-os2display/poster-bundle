/**
 * @name PosterBundle
 * @version v1.0.0
 * @link https://github.com/itk-os2display/poster-bundle
 */
angular.module("posterModule",[]),angular.module("posterModule").config([function(){}]),angular.module("posterModule").directive("posterTool",["$timeout","$http",function(a,o){"use strict";return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",tool:"="},link:function(r){r.typeSelect="searchName",r.searchName="",r.searchUrl="",r.pagerBack=function(){r.pager.centerItem=Math.max(r.pager.centerItem-10,1)},r.pagerForward=function(){r.pager.centerItem=Math.min(r.pager.centerItem+10,r.pager.pagerMax)},r.getPagerPages=function(){r.pager.pages=[];for(var e=parseInt(r.pager.centerItem/10),t=1;t<=10;t++)t+10*e<=r.pager.pagerMax&&r.pager.pages.push(t+10*e);return r.pager.pages},r.calculatePager=function(e){e&&(r.pager={pages:[],currentPage:e.page,pagerMax:e.number_of_pages,itemsPerPage:e.items_per_page,totalResults:e.total_results,centerItem:e.page})},r.search=function(e){r.displayEvent=null,r.events=null;var t={};e&&(t.page=e),"searchName"===r.typeSelect?t.name=r.searchName:"searchUrl"===r.typeSelect&&(t.url=r.searchUrl),o.get("/api/os2display_poster/events",{params:t}).then(function(e){a(function(){r.events=e.data.events,r.meta=e.data.meta,r.calculatePager(r.meta)})})},r.clickEvent=function(e){r.displayEvent=e,1===r.displayEvent.occurrences.length&&r.clickOccurrence(r.displayEvent.occurrences[0])},r.refreshEvent=function(){o.get("/api/os2display_poster/occurrence",{params:{occurrenceId:r.slide.options.data.occurrenceId}}).then(function(e){a(function(){r.slide.options.data=e.data})})},r.clickOccurrence=function(e){o.get("/api/os2display_poster/occurrence",{params:{occurrenceId:e["@id"]}}).then(function(e){a(function(){r.slide.options.data=e.data})}),r.close()}},templateUrl:"/bundles/os2displayposter/apps/posterModule/posterTool.html"}}]),angular.module("posterModule").directive("posterEditTextsTool",[function(){"use strict";return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",tool:"="},link:function(e){e.slide.options.overrides||(e.slide.options.overrides={})},templateUrl:"/bundles/os2displayposter/apps/posterModule/posterEditTextsTool.html"}}]);